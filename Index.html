<!DOCTYPE html>
<html lang="en">
<head>


     <link rel="manifest" href="/manifest.json">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Image Tools - Resizer & Converter</title>
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --accent-color: #4895ef;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --success-color: #4cc9f0;
            --warning-color: #f72585;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            touch-action: manipulation;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            padding: 25px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary-color);
            font-weight: 600;
            font-size: 28px;
        }

        .tab-container {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab:hover:not(.active) {
            color: var(--dark-color);
            background-color: rgba(0, 0, 0, 0.03);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Common styles for all tools */
        .drop-area {
            border: 3px dashed var(--accent-color);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
            background-color: rgba(72, 149, 239, 0.05);
            cursor: pointer;
            position: relative;
        }

        .drop-area.highlight {
            background-color: rgba(72, 149, 239, 0.15);
            border-color: var(--primary-color);
        }

        .drop-area i {
            font-size: 48px;
            color: var(--accent-color);
            margin-bottom: 15px;
        }

        .drop-area p {
            font-size: 18px;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .browse-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        .browse-btn:hover {
            background-color: var(--secondary-color);
        }

        .file-input {
            display: none;
        }

        .preview-container {
            display: none;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .image-preview {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            background-color: #f9f9f9;
        }

        .preview-image {
            max-width: 100%;
            max-height: 400px;
            object-fit: contain;
            transition: all 0.3s ease;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 120px;
            justify-content: center;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: white;
            color: var(--dark-color);
            border: 1px solid #ddd;
        }

        .btn-secondary:hover {
            background-color: #f5f5f5;
        }

        .btn-danger {
            background-color: var(--warning-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #d91a6d;
        }

        .file-info {
            margin-top: 15px;
            font-size: 14px;
            color: #666;
        }

        .file-info span {
            font-weight: 500;
            color: var(--dark-color);
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 15px;
            display: none;
            z-index: 10;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(67, 97, 238, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: var(--success-color);
            color: white;
            border-radius: 5px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateX(200%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification.show {
            transform: translateX(0);
        }

        /* Resizer specific styles */
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .control-group {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .control-group h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .slider-container {
            margin-bottom: 20px;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .slider-header span {
            font-weight: 500;
            color: var(--dark-color);
        }

        .slider-value {
            color: var(--primary-color);
            font-weight: 600;
        }

        .slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: #e0e0e0;
            outline: none;
            border-radius: 4px;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            transition: all 0.2s;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            background: var(--secondary-color);
        }

        .preset-sizes, .preset-rotations {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .preset-btn, .preset-rotation-btn {
            padding: 8px 12px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            flex: 1;
            min-width: 0;
            text-align: center;
        }

        .preset-btn:hover, .preset-rotation-btn:hover {
            background-color: #f0f0f0;
        }

        .preset-btn.active, .preset-rotation-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary-color);
            cursor: pointer;
        }

        .checkbox-group label {
            cursor: pointer;
            user-select: none;
        }

        .dimension-inputs {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .dimension-input {
            flex: 1;
        }

        .dimension-input label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: #555;
        }

        .dimension-input input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        /* Footer styles */
        .footer {
            margin-top: 40px;
            padding: 20px 0;
            background-color: #ffff;
            color: white;
            font-size: 14px;
            text-align: center;
            border-radius: 0 0 12px 12px;
        }

        .footer-content p {
            margin-bottom: 10px;
            margin-top: 20px;
            color: #adb5bd;
        }

        .footer-links {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }

        .footer-links li a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links li a:hover {
            color: var(--accent-color);
        }

        /* Mobile specific adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 24px;
                margin-bottom: 20px;
            }
            
            .drop-area {
                padding: 20px;
            }
            
            .drop-area i {
                font-size: 40px;
            }
            
            .preset-sizes, .preset-rotations {
                gap: 6px;
            }
            
            .preset-btn, .preset-rotation-btn {
                padding: 6px 8px;
                font-size: 13px;
            }
            
            .dimension-inputs {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 15px;
            }

            .controls {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .preset-btn, .preset-rotation-btn {
                flex: 1 0 calc(33% - 6px);
                font-size: 12px;
                padding: 6px 4px;
            }
            
            .control-group {
                padding: 15px;
            }

            .tab {
                padding: 10px 12px;
                font-size: 14px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1>Image Tools</h1>
        
        <div class="tab-container">
            <div class="tab active" data-tab="resizer">Image Resizer</div>
            <div class="tab" data-tab="jpg2png">JPG to PNG</div>
            <div class="tab" data-tab="png2jpg">PNG to JPG</div>
        </div>
        
        <!-- Image Resizer Tab -->
        <div id="resizer" class="tab-content active">
            <div class="drop-area" id="resizerDropArea">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>Drag & Drop your image here</p>
                <p>or</p>
                <button class="browse-btn" id="resizerBrowseBtn">Browse Files</button>
                <input type="file" id="resizerFileInput" accept="image/*" class="file-input">
            </div>
            
            <div class="preview-container" id="resizerPreviewContainer">
                <div class="image-preview">
                    <img id="resizerPreviewImage" class="preview-image" src="" alt="Preview">
                    <div class="loading-overlay" id="resizerLoadingOverlay">
                        <div class="spinner"></div>
                        <p>Processing image...</p>
                    </div>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <h3><i class="fas fa-sliders-h"></i> Size Adjustment</h3>
                        
                        <div class="slider-container">
                            <div class="slider-header">
                                <span>Scale: <span id="scaleValue" class="slider-value">100%</span></span>
                            </div>
                            <input type="range" min="10" max="200" value="100" class="slider" id="scaleSlider">
                        </div>
                        
                        <div class="preset-sizes">
                            <button class="preset-btn" data-scale="25">25%</button>
                            <button class="preset-btn" data-scale="50">50%</button>
                            <button class="preset-btn" data-scale="75">75%</button>
                            <button class="preset-btn active" data-scale="100">100%</button>
                            <button class="preset-btn" data-scale="125">125%</button>
                            <button class="preset-btn" data-scale="150">150%</button>
                            <button class="preset-btn" data-scale="200">200%</button>
                        </div>
                        
                        <div class="checkbox-group">
                            <input type="checkbox" id="lockAspect" checked>
                            <label for="lockAspect">Lock aspect ratio</label>
                        </div>
                        
                        <div class="dimension-inputs">
                            <div class="dimension-input">
                                <label for="widthInput">Width (px)</label>
                                <input type="number" id="widthInput" min="1">
                            </div>
                            <div class="dimension-input">
                                <label for="heightInput">Height (px)</label>
                                <input type="number" id="heightInput" min="1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <h3><i class="fas fa-rotate-right"></i> Rotation</h3>
                        
                        <div class="slider-container">
                            <div class="slider-header">
                                <span>Rotation: <span id="rotationValue" class="slider-value">0°</span></span>
                            </div>
                            <input type="range" min="-180" max="180" value="0" class="slider" id="rotationSlider">
                        </div>
                        
                        <div class="preset-rotations">
                            <button class="preset-rotation-btn" data-rotation="-90">-90°</button>
                            <button class="preset-rotation-btn" data-rotation="-45">-45°</button>
                            <button class="preset-rotation-btn active" data-rotation="0">0°</button>
                            <button class="preset-rotation-btn" data-rotation="45">45°</button>
                            <button class="preset-rotation-btn" data-rotation="90">90°</button>
                            <button class="preset-rotation-btn" data-rotation="180">180°</button>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <h3><i class="fas fa-cog"></i> Advanced Options</h3>
                        
                        <div class="slider-container">
                            <div class="slider-header">
                                <span>Quality: <span id="qualityValue" class="slider-value">90%</span></span>
                            </div>
                            <input type="range" min="10" max="100" value="90" class="slider" id="qualitySlider">
                        </div>
                        
                        <div class="checkbox-group">
                            <input type="checkbox" id="smoothScaling" checked>
                            <label for="smoothScaling">Smooth scaling</label>
                        </div>
                        
                        <div class="file-info">
                            <p>Original size: <span id="originalSize">-</span></p>
                            <p>Original dimensions: <span id="originalDimensions">-</span></p>
                            <p>New dimensions: <span id="newDimensions">-</span></p>
                            <p>Estimated size: <span id="estimatedSize">-</span></p>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn btn-primary" id="resizerDownloadBtn">
                                <i class="fas fa-download"></i> Download
                            </button>
                            <button class="btn btn-secondary" id="resizerResetBtn">
                                <i class="fas fa-undo"></i> Reset
                            </button>
                            <button class="btn btn-danger" id="resizerClearBtn">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- JPG to PNG Tab -->
        <div id="jpg2png" class="tab-content">
            <div class="drop-area" id="jpg2pngDropArea">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>Drag & Drop your JPG file here</p>
                <p>or</p>
                <button class="browse-btn" id="jpg2pngBrowseBtn">Browse Files</button>
                <input type="file" id="jpg2pngFileInput" accept="image/jpeg" class="file-input">
            </div>
            
            <div class="preview-container" id="jpg2pngPreviewContainer">
                <div class="image-preview">
                    <img id="jpg2pngPreviewImage" class="preview-image" src="" alt="Preview">
                    <div class="loading-overlay" id="jpg2pngLoadingOverlay">
                        <div class="spinner"></div>
                        <p>Processing image...</p>
                    </div>
                </div>
                
                <div class="file-info">
                    <p>Original size: <span id="jpg2pngOriginalSize">-</span></p>
                    <p>Original dimensions: <span id="jpg2pngOriginalDimensions">-</span></p>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="jpg2pngDownloadBtn">
                        <i class="fas fa-download"></i> Download PNG
                    </button>
                    <button class="btn btn-danger" id="jpg2pngClearBtn">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                </div>
            </div>
        </div>
        
        <!-- PNG to JPG Tab -->
        <div id="png2jpg" class="tab-content">
            <div class="drop-area" id="png2jpgDropArea">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>Drag & Drop your PNG file here</p>
                <p>or</p>
                <button class="browse-btn" id="png2jpgBrowseBtn">Browse Files</button>
                <input type="file" id="png2jpgFileInput" accept="image/png" class="file-input">
            </div>
            
            <div class="preview-container" id="png2jpgPreviewContainer">
                <div class="image-preview">
                    <img id="png2jpgPreviewImage" class="preview-image" src="" alt="Preview">
                    <div class="loading-overlay" id="png2jpgLoadingOverlay">
                        <div class="spinner"></div>
                        <p>Processing image...</p>
                    </div>
                </div>
                
                <div class="file-info">
                    <p>Original size: <span id="png2jpgOriginalSize">-</span></p>
                    <p>Original dimensions: <span id="png2jpgOriginalDimensions">-</span></p>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="png2jpgDownloadBtn">
                        <i class="fas fa-download"></i> Download JPG
                    </button>
                    <button class="btn btn-danger" id="png2jpgClearBtn">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                </div>
            </div>
        </div>
        
        <div class="notification" id="notification">
            <i class="fas fa-check-circle"></i>
            <span id="notificationText">Operation completed successfully!</span>
        </div>
        
        <div class="footer">
            <div class="footer-content">


!-- HTML section for the install button -->
<div id="installContainer" style="display: none; position: ; bottom: 20px; right: 33%; z-index: 1000; margin-top:7px; margin-bottom:7px;">
    <button id="installButton" 
            onclick="installApp()"
            style="padding: 10px 20px; background-color: #1755a6; color: white; border: none; border-radius: 20px; cursor: pointer;">
        Install App
    </button>
</div>



                
                <p>Image Tools by Web.Guno</p>
                <ul class="footer-links">
                    <li><a href="#" data-tab="resizer">Image Resizer</a></li>
                    <li><a href="#" data-tab="jpg2png">JPG to PNG</a></li>
                    <li><a href="#" data-tab="png2jpg">PNG to JPG</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Hidden canvas elements for conversions -->
    <canvas id="resizerCanvas" style="display:none;"></canvas>
    <canvas id="jpg2pngCanvas" style="display:none;"></canvas>
    <canvas id="png2jpgCanvas" style="display:none;"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching functionality
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    const tabId = tab.dataset.tab;
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Footer links to switch tabs
            document.querySelectorAll('.footer-links a').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabId = link.dataset.tab;
                    const tab = document.querySelector(`.tab[data-tab="${tabId}"]`);
                    if (tab) tab.click();
                });
            });
            
            // Initialize all tools
            initImageResizer();
            initJpgToPng();
            initPngToJpg();
            
            // Notification function
            function showNotification(message) {
                const notification = document.getElementById('notification');
                const notificationText = document.getElementById('notificationText');
                
                notificationText.textContent = message;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            // Format file size
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            // Image Resizer Tool
            function initImageResizer() {
                // DOM Elements
                const dropArea = document.getElementById('resizerDropArea');
                const browseBtn = document.getElementById('resizerBrowseBtn');
                const fileInput = document.getElementById('resizerFileInput');
                const previewContainer = document.getElementById('resizerPreviewContainer');
                const previewImage = document.getElementById('resizerPreviewImage');
                const loadingOverlay = document.getElementById('resizerLoadingOverlay');
                const scaleSlider = document.getElementById('scaleSlider');
                const scaleValue = document.getElementById('scaleValue');
                const presetBtns = document.querySelectorAll('#resizer .preset-btn');
                const lockAspect = document.getElementById('lockAspect');
                const widthInput = document.getElementById('widthInput');
                const heightInput = document.getElementById('heightInput');
                const rotationSlider = document.getElementById('rotationSlider');
                const rotationValue = document.getElementById('rotationValue');
                const presetRotationBtns = document.querySelectorAll('#resizer .preset-rotation-btn');
                const qualitySlider = document.getElementById('qualitySlider');
                const qualityValue = document.getElementById('qualityValue');
                const smoothScaling = document.getElementById('smoothScaling');
                const downloadBtn = document.getElementById('resizerDownloadBtn');
                const resetBtn = document.getElementById('resizerResetBtn');
                const clearBtn = document.getElementById('resizerClearBtn');
                const originalSize = document.getElementById('originalSize');
                const originalDimensions = document.getElementById('originalDimensions');
                const newDimensions = document.getElementById('newDimensions');
                const estimatedSize = document.getElementById('estimatedSize');
                const canvas = document.getElementById('resizerCanvas');
                const ctx = canvas.getContext('2d');
                
                // Variables
                let originalImage = null;
                let originalWidth = 0;
                let originalHeight = 0;
                let originalFileSize = 0;
                let currentScale = 100;
                let currentQuality = 90;
                let currentRotation = 0;
                
                // Event Listeners
                browseBtn.addEventListener('click', () => fileInput.click());
                fileInput.addEventListener('change', handleFileSelect);
                
                // Drag and drop events
                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    dropArea.addEventListener(eventName, preventDefaults, false);
                });
                
                function preventDefaults(e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                
                ['dragenter', 'dragover'].forEach(eventName => {
                    dropArea.addEventListener(eventName, highlight, false);
                });
                
                ['dragleave', 'drop'].forEach(eventName => {
                    dropArea.addEventListener(eventName, unhighlight, false);
                });
                
                function highlight() {
                    dropArea.classList.add('highlight');
                }
                
                function unhighlight() {
                    dropArea.classList.remove('highlight');
                }
                
                dropArea.addEventListener('drop', handleDrop, false);
                
                function handleDrop(e) {
                    const dt = e.dataTransfer;
                    const files = dt.files;
                    if (files.length > 0 && files[0].type.startsWith('image/')) {
                        handleFileSelect({ target: { files: [files[0]] } });
                    }
                }
                
                // Image handling
                function handleFileSelect(e) {
                    const file = e.target.files[0];
                    if (!file || !file.type.match('image.*')) return;
                    
                    showLoading();
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        originalImage = new Image();
                        originalImage.onload = function() {
                            originalWidth = this.width;
                            originalHeight = this.height;
                            originalFileSize = file.size;
                            
                            previewImage.src = e.target.result;
                            previewContainer.style.display = 'flex';
                            
                            updateFileInfo();
                            resetToOriginal();
                            hideLoading();
                        };
                        originalImage.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
                
                // Size controls
                scaleSlider.addEventListener('input', function() {
                    currentScale = parseInt(this.value);
                    scaleValue.textContent = `${currentScale}%`;
                    updateDimensionsFromScale();
                    applyTransformation();
                });
                
                presetBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        presetBtns.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        
                        const scale = parseInt(this.dataset.scale);
                        currentScale = scale;
                        scaleSlider.value = scale;
                        scaleValue.textContent = `${scale}%`;
                        updateDimensionsFromScale();
                        applyTransformation();
                    });
                });
                
                // Rotation controls
                rotationSlider.addEventListener('input', function() {
                    currentRotation = parseInt(this.value);
                    rotationValue.textContent = `${currentRotation}°`;
                    applyTransformation();
                });
                
                presetRotationBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        presetRotationBtns.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        
                        const rotation = parseInt(this.dataset.rotation);
                        currentRotation = rotation;
                        rotationSlider.value = rotation;
                        rotationValue.textContent = `${rotation}°`;
                        applyTransformation();
                    });
                });
                
                // Dimension inputs
                widthInput.addEventListener('input', function() {
                    if (!originalImage) return;
                    
                    const newWidth = parseInt(this.value);
                    if (isNaN(newWidth) || newWidth <= 0) return;
                    
                    if (lockAspect.checked) {
                        const ratio = originalHeight / originalWidth;
                        const newHeight = Math.round(newWidth * ratio);
                        heightInput.value = newHeight;
                    }
                    
                    updateScaleFromDimensions();
                    applyTransformation();
                });
                
                heightInput.addEventListener('input', function() {
                    if (!originalImage) return;
                    
                    const newHeight = parseInt(this.value);
                    if (isNaN(newHeight) || newHeight <= 0) return;
                    
                    if (lockAspect.checked) {
                        const ratio = originalWidth / originalHeight;
                        const newWidth = Math.round(newHeight * ratio);
                        widthInput.value = newWidth;
                    }
                    
                    updateScaleFromDimensions();
                    applyTransformation();
                });
                
                // Quality control
                qualitySlider.addEventListener('input', function() {
                    currentQuality = parseInt(this.value);
                    qualityValue.textContent = `${currentQuality}%`;
                    updateEstimatedSize();
                });
                
                // Action buttons
                downloadBtn.addEventListener('click', downloadImage);
                resetBtn.addEventListener('click', resetToOriginal);
                clearBtn.addEventListener('click', clearAll);
                
                // Helper functions
                function updateDimensionsFromScale() {
                    if (!originalImage) return;
                    
                    const newWidth = Math.round(originalWidth * (currentScale / 100));
                    const newHeight = Math.round(originalHeight * (currentScale / 100));
                    
                    widthInput.value = newWidth;
                    heightInput.value = newHeight;
                    
                    updateNewDimensionsInfo();
                    updateEstimatedSize();
                }
                
                function updateScaleFromDimensions() {
                    if (!originalImage) return;
                    
                    const newWidth = parseInt(widthInput.value);
                    const newHeight = parseInt(heightInput.value);
                    
                    if (isNaN(newWidth) || isNaN(newHeight) || newWidth <= 0 || newHeight <= 0) return;
                    
                    const widthScale = Math.round((newWidth / originalWidth) * 100);
                    const heightScale = Math.round((newHeight / originalHeight) * 100);
                    
                    // Use the average scale if aspect ratio is not locked
                    currentScale = lockAspect.checked ? widthScale : Math.round((widthScale + heightScale) / 2);
                    
                    scaleSlider.value = currentScale;
                    scaleValue.textContent = `${currentScale}%`;
                    
                    // Update preset buttons
                    presetBtns.forEach(btn => btn.classList.remove('active'));
                    const matchingPreset = Array.from(presetBtns).find(btn => 
                        parseInt(btn.dataset.scale) === currentScale
                    );
                    if (matchingPreset) {
                        matchingPreset.classList.add('active');
                    }
                    
                    updateNewDimensionsInfo();
                    updateEstimatedSize();
                }
                
                function applyTransformation() {
                    if (!originalImage) return;
                    
                    const newWidth = parseInt(widthInput.value);
                    const newHeight = parseInt(heightInput.value);
                    
                    previewImage.style.width = `${newWidth}px`;
                    previewImage.style.height = `${newHeight}px`;
                    previewImage.style.transform = `rotate(${currentRotation}deg)`;
                }
                
                function updateFileInfo() {
                    originalSize.textContent = formatFileSize(originalFileSize);
                    originalDimensions.textContent = `${originalWidth} × ${originalHeight} px`;
                    updateNewDimensionsInfo();
                    updateEstimatedSize();
                }
                
                function updateNewDimensionsInfo() {
                    const newWidth = parseInt(widthInput.value);
                    const newHeight = parseInt(heightInput.value);
                    newDimensions.textContent = `${newWidth} × ${newHeight} px`;
                }
                
                function updateEstimatedSize() {
                    if (!originalImage) return;
                    
                    const newWidth = parseInt(widthInput.value);
                    const newHeight = parseInt(heightInput.value);
                    
                    // Very rough estimation (not accurate but gives an idea)
                    const sizeFactor = (newWidth * newHeight) / (originalWidth * originalHeight);
                    const qualityFactor = currentQuality / 100;
                    const estimatedFileSize = originalFileSize * sizeFactor * qualityFactor;
                    
                    estimatedSize.textContent = formatFileSize(estimatedFileSize);
                }
                
                function resetToOriginal() {
                    if (!originalImage) return;
                    
                    currentScale = 100;
                    scaleSlider.value = 100;
                    scaleValue.textContent = '100%';
                    currentRotation = 0;
                    rotationSlider.value = 0;
                    rotationValue.textContent = '0°';
                    qualitySlider.value = 90;
                    qualityValue.textContent = '90%';
                    smoothScaling.checked = true;
                    lockAspect.checked = true;
                    
                    presetBtns.forEach(btn => btn.classList.remove('active'));
                    document.querySelector('#resizer .preset-btn[data-scale="100"]').classList.add('active');
                    
                    presetRotationBtns.forEach(btn => btn.classList.remove('active'));
                    document.querySelector('#resizer .preset-rotation-btn[data-rotation="0"]').classList.add('active');
                    
                    widthInput.value = originalWidth;
                    heightInput.value = originalHeight;
                    
                    previewImage.style.width = '';
                    previewImage.style.height = '';
                    previewImage.style.transform = '';
                    
                    updateFileInfo();
                }
                
                function clearAll() {
                    originalImage = null;
                    previewImage.src = '';
                    previewContainer.style.display = 'none';
                    fileInput.value = '';
                    originalSize.textContent = '-';
                    originalDimensions.textContent = '-';
                    newDimensions.textContent = '-';
                    estimatedSize.textContent = '-';
                }
                
                function downloadImage() {
                    if (!originalImage) return;
                    
                    showLoading();
                    
                    // Create a canvas with the new dimensions
                    const newWidth = parseInt(widthInput.value);
                    const newHeight = parseInt(heightInput.value);
                    
                    // Calculate canvas size needed for rotation
                    const rad = currentRotation * Math.PI / 180;
                    const sin = Math.abs(Math.sin(rad));
                    const cos = Math.abs(Math.cos(rad));
                    const canvasWidth = Math.ceil(newWidth * cos + newHeight * sin);
                    const canvasHeight = Math.ceil(newWidth * sin + newHeight * cos);
                    
                    canvas.width = canvasWidth;
                    canvas.height = canvasHeight;
                    
                    // Set image smoothing
                    ctx.imageSmoothingEnabled = smoothScaling.checked;
                    ctx.imageSmoothingQuality = 'high';
                    
                    // Center and rotate the image
                    ctx.translate(canvasWidth/2, canvasHeight/2);
                    ctx.rotate(rad);
                    ctx.drawImage(originalImage, -newWidth/2, -newHeight/2, newWidth, newHeight);
                    
                    // Convert to blob with specified quality
                    canvas.toBlob(function(blob) {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `resized-image-${newWidth}x${newHeight}-${currentRotation}deg-${currentQuality}q.jpg`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                        
                        hideLoading();
                        showNotification('Image downloaded successfully!');
                    }, 'image/jpeg', currentQuality / 100);
                }
                
                function showLoading() {
                    loadingOverlay.style.display = 'flex';
                }
                
                function hideLoading() {
                    loadingOverlay.style.display = 'none';
                }
            }
            
            // JPG to PNG Tool
            function initJpgToPng() {
                // DOM Elements
                const dropArea = document.getElementById('jpg2pngDropArea');
                const browseBtn = document.getElementById('jpg2pngBrowseBtn');
                const fileInput = document.getElementById('jpg2pngFileInput');
                const previewContainer = document.getElementById('jpg2pngPreviewContainer');
                const previewImage = document.getElementById('jpg2pngPreviewImage');
                const loadingOverlay = document.getElementById('jpg2pngLoadingOverlay');
                const downloadBtn = document.getElementById('jpg2pngDownloadBtn');
                const clearBtn = document.getElementById('jpg2pngClearBtn');
                const originalSize = document.getElementById('jpg2pngOriginalSize');
                const originalDimensions = document.getElementById('jpg2pngOriginalDimensions');
                const canvas = document.getElementById('jpg2pngCanvas');
                const ctx = canvas.getContext('2d');
                
                // Variables
                let originalImage = null;
                let originalWidth = 0;
                let originalHeight = 0;
                let originalFileSize = 0;
                
                // Event Listeners
                browseBtn.addEventListener('click', () => fileInput.click());
                fileInput.addEventListener('change', handleFileSelect);
                
                // Drag and drop events
                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    dropArea.addEventListener(eventName, preventDefaults, false);
                });
                
                function preventDefaults(e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                
                ['dragenter', 'dragover'].forEach(eventName => {
                    dropArea.addEventListener(eventName, highlight, false);
                });
                
                ['dragleave', 'drop'].forEach(eventName => {
                    dropArea.addEventListener(eventName, unhighlight, false);
                });
                
                function highlight() {
                    dropArea.classList.add('highlight');
                }
                
                function unhighlight() {
                    dropArea.classList.remove('highlight');
                }
                
                dropArea.addEventListener('drop', handleDrop, false);
                
                function handleDrop(e) {
                    const dt = e.dataTransfer;
                    const files = dt.files;
                    if (files.length > 0 && files[0].type === 'image/jpeg') {
                        handleFileSelect({ target: { files: [files[0]] } });
                    } else {
                        alert('Please drop a valid JPG file.');
                    }
                }
                
                // Image handling
                function handleFileSelect(e) {
                    const file = e.target.files[0];
                    if (!file || file.type !== 'image/jpeg') {
                        alert('Please upload a JPG file.');
                        return;
                    }
                    
                    showLoading();
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        originalImage = new Image();
                        originalImage.onload = function() {
                            originalWidth = this.width;
                            originalHeight = this.height;
                            originalFileSize = file.size;
                            
                            previewImage.src = e.target.result;
                            previewContainer.style.display = 'flex';
                            
                            // Update file info
                            originalSize.textContent = formatFileSize(originalFileSize);
                            originalDimensions.textContent = `${originalWidth} × ${originalHeight} px`;
                            
                            hideLoading();
                        };
                        originalImage.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
                
                // Action buttons
                downloadBtn.addEventListener('click', downloadImage);
                clearBtn.addEventListener('click', clearAll);
                
                // Helper functions
                function downloadImage() {
                    if (!originalImage) return;
                    
                    showLoading();
                    
                    // Set canvas size to image size
                    canvas.width = originalWidth;
                    canvas.height = originalHeight;
                    
                    // Draw image onto canvas
                    ctx.drawImage(originalImage, 0, 0);
                    
                    // Convert to PNG and download
                    const pngUrl = canvas.toDataURL('image/png');
                    const a = document.createElement('a');
                    a.href = pngUrl;
                    a.download = `converted-${Date.now()}.png`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    hideLoading();
                    showNotification('PNG downloaded successfully!');
                }
                
                function clearAll() {
                    originalImage = null;
                    previewImage.src = '';
                    previewContainer.style.display = 'none';
                    fileInput.value = '';
                    originalSize.textContent = '-';
                    originalDimensions.textContent = '-';
                }
                
                function showLoading() {
                    loadingOverlay.style.display = 'flex';
                }
                
                function hideLoading() {
                    loadingOverlay.style.display = 'none';
                }
            }
            
            // PNG to JPG Tool
            function initPngToJpg() {
                // DOM Elements
                const dropArea = document.getElementById('png2jpgDropArea');
                const browseBtn = document.getElementById('png2jpgBrowseBtn');
                const fileInput = document.getElementById('png2jpgFileInput');
                const previewContainer = document.getElementById('png2jpgPreviewContainer');
                const previewImage = document.getElementById('png2jpgPreviewImage');
                const loadingOverlay = document.getElementById('png2jpgLoadingOverlay');
                const downloadBtn = document.getElementById('png2jpgDownloadBtn');
                const clearBtn = document.getElementById('png2jpgClearBtn');
                const originalSize = document.getElementById('png2jpgOriginalSize');
                const originalDimensions = document.getElementById('png2jpgOriginalDimensions');
                const canvas = document.getElementById('png2jpgCanvas');
                const ctx = canvas.getContext('2d');
                
                // Variables
                let originalImage = null;
                let originalWidth = 0;
                let originalHeight = 0;
                let originalFileSize = 0;
                
                // Event Listeners
                browseBtn.addEventListener('click', () => fileInput.click());
                fileInput.addEventListener('change', handleFileSelect);
                
                // Drag and drop events
                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    dropArea.addEventListener(eventName, preventDefaults, false);
                });
                
                function preventDefaults(e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                
                ['dragenter', 'dragover'].forEach(eventName => {
                    dropArea.addEventListener(eventName, highlight, false);
                });
                
                ['dragleave', 'drop'].forEach(eventName => {
                    dropArea.addEventListener(eventName, unhighlight, false);
                });
                
                function highlight() {
                    dropArea.classList.add('highlight');
                }
                
                function unhighlight() {
                    dropArea.classList.remove('highlight');
                }
                
                dropArea.addEventListener('drop', handleDrop, false);
                
                function handleDrop(e) {
                    const dt = e.dataTransfer;
                    const files = dt.files;
                    if (files.length > 0 && files[0].type === 'image/png') {
                        handleFileSelect({ target: { files: [files[0]] } });
                    } else {
                        alert('Please drop a valid PNG file.');
                    }
                }
                
                // Image handling
                function handleFileSelect(e) {
                    const file = e.target.files[0];
                    if (!file || file.type !== 'image/png') {
                        alert('Please upload a PNG file.');
                        return;
                    }
                    
                    showLoading();
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        originalImage = new Image();
                        originalImage.onload = function() {
                            originalWidth = this.width;
                            originalHeight = this.height;
                            originalFileSize = file.size;
                            
                            // Set canvas size
                            canvas.width = originalWidth;
                            canvas.height = originalHeight;
                            
                            // Fill background with white (JPG doesn't support transparency)
                            ctx.fillStyle = '#FFFFFF';
                            ctx.fillRect(0, 0, canvas.width, canvas.height);
                            
                            // Draw PNG over white background
                            ctx.drawImage(originalImage, 0, 0);
                            
                            // Show preview
                            previewImage.src = canvas.toDataURL('image/jpeg', 0.95);
                            previewContainer.style.display = 'flex';
                            
                            // Update file info
                            originalSize.textContent = formatFileSize(originalFileSize);
                            originalDimensions.textContent = `${originalWidth} × ${originalHeight} px`;
                            
                            hideLoading();
                        };
                        originalImage.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
                
                // Action buttons
                downloadBtn.addEventListener('click', downloadImage);
                clearBtn.addEventListener('click', clearAll);
                
                // Helper functions
                function downloadImage() {
                    if (!originalImage) return;
                    
                    showLoading();
                    
                    // Convert to JPG and download
                    canvas.toBlob(function(blob) {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `converted-${Date.now()}.jpg`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                        
                        hideLoading();
                        showNotification('JPG downloaded successfully!');
                    }, 'image/jpeg', 0.95);
                }
                
                function clearAll() {
                    originalImage = null;
                    previewImage.src = '';
                    previewContainer.style.display = 'none';
                    fileInput.value = '';
                    originalSize.textContent = '-';
                    originalDimensions.textContent = '-';
                }
                
                function showLoading() {
                    loadingOverlay.style.display = 'flex';
                }
                
                function hideLoading() {
                    loadingOverlay.style.display = 'none';
                }
            }
        });
    </script>






    
<script>
    // Register Service Worker
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/service-worker.js')
                .then(registration => {
                    console.log('Service Worker registered!');
                })
                .catch(error => {
                    console.error('Service Worker registration failed:', error);
                });
        });
    }

    let deferredPrompt;

    // Handle beforeinstallprompt event
    window.addEventListener('beforeinstallprompt', (event) => {
        // Prevent Chrome <= 67 from automatically showing the prompt
        event.preventDefault();
        // Stash the event so it can be triggered later
        deferredPrompt = event;
        // Show the install button
        showInstallButton();
    });

    // Function to show the install button
    function showInstallButton() {
        const installButton = document.getElementById('installButton');
        if (installButton) {
            installButton.style.display = 'block';
        }
    }

    // Function to trigger the installation prompt
    function installApp() {
        if (deferredPrompt) {
            // Show the prompt
            deferredPrompt.prompt();
            // Wait for the user to respond to the prompt
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('User accepted the install prompt');
                } else {
                    console.log('User dismissed the install prompt');
                }
                // Reset the deferred prompt variable
                deferredPrompt = null;
                // Hide the install button
                const installButton = document.getElementById('installButton');
                if (installButton) {
                    installButton.style.display = 'none';
                }
            });
        }
    }
</script>



<script>
    // Show the install container when PWA is installable
    function showInstallButton() {
        const installContainer = document.getElementById('installContainer');
        if (installContainer) {
            installContainer.style.display = 'block';
        }
    }
</script>
</body>
</html>
